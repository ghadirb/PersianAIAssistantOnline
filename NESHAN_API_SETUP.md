# راهنمای تنظیم API نشان برای اپلیکیشن اندروید

## 📱 اطلاعات برنامه شما:

### 1️⃣ نام باندل (Package Name):
```
com.persianai.assistant
```

### 2️⃣ کلید امضاء SHA-1 (Debug):
```
7D:D8:DA:4E:AF:A2:BA:38:14:C9:C9:48:2E:9E:DF:E3:2F:55:EC:90
```

### 3️⃣ کلید امضاء SHA-256 (اختیاری):
```
6A:6D:8D:06:11:1C:0F:59:A8:0D:B7:B7:DA:21:C3:47:21:5E:05:29:98:5D:29:D0:4A:CA:08:CC:8D:5A:86:25
```

---

## 🔧 مراحل ثبت در پنل نشان:

### مرحله 1: ورود به پنل
1. برو به: https://platform.neshan.org/
2. وارد حساب کاربری شو

### مرحله 2: ایجاد API Key جدید
1. از منوی سمت چپ، گزینه **"کلیدها"** یا **"API Keys"** رو انتخاب کن
2. روی **"کلید جدید"** کلیک کن
3. نوع کلید: **"اپلیکیشن اندروید"** رو انتخاب کن

### مرحله 3: وارد کردن اطلاعات
در فرم ثبت کلید، این مقادیر رو وارد کن:

**نام:**
```
PersianAIAssistant
```

**نام باندل (Package Name):**
```
com.persianai.assistant
```

**کلید امضاء (SHA-1):**
```
7D:D8:DA:4E:AF:A2:BA:38:14:C9:C9:48:2E:9E:DF:E3:2F:55:EC:90
```

### مرحله 4: انتخاب سرویس‌ها
سرویس‌های مورد نیاز رو فعال کن:
- ✅ **نقشه (Map)**
- ✅ **جستجو (Search)**
- ✅ **مسیریابی (Direction)**
- ✅ **ژئوکدینگ معکوس (Reverse Geocoding)**

### مرحله 5: ذخیره و دریافت کلید
1. روی **"ایجاد کلید"** کلیک کن
2. API Key جدید نمایش داده میشه
3. **کپی کن** و در کد استفاده کن

---

## 💾 جایگزینی API Key در کد:

### فایل: `NeshanDirectionAPI.kt`
```kotlin
private val apiKey = "کلید_جدید_اینجا"
```

### فایل: `NeshanSearchAPI.kt`
```kotlin
private val apiKey = "کلید_جدید_اینجا"
```

---

## ⚠️ نکات مهم:

### 1. تفاوت کلید سرویس و اپلیکیشن:

**کلید سرویس (Service Key):**
- فقط برای تست و توسعه
- محدودیت درخواست کمتر
- ✅ کلید فعلی شما: `service.649ba7521ba04da595c5ab56413b3c84`

**کلید اپلیکیشن (App Key):**
- برای محصول نهایی
- امنیت بیشتر (فقط با SHA-1 شما کار می‌کنه)
- محدودیت درخواست بیشتر
- ✅ **توصیه میشه این رو استفاده کنی**

### 2. SHA-1 برای Release:
کلید بالا فقط برای **Debug** هست. برای نسخه نهایی (Release) باید:
```bash
keytool -list -v -keystore your-release-key.keystore
```

### 3. چک کردن API Key:
بعد از جایگزینی، برنامه رو اجرا کن و لاگ رو چک کن:
```bash
adb logcat | grep "NeshanDirection"
```

اگه مشکلی نباشه باید ببینی:
```
✅ Response code: 200
✅ Route 0 polyline length: 2456
```

---

## 🔄 اگه همچنان مشکل polyline داری:

### احتمال 1: API Key محدودیت داره
- برو پنل نشان
- چک کن سرویس "Direction" فعال باشه
- چک کن محدودیت درخواست تموم نشده باشه

### احتمال 2: پاسخ API مشکل داره
لاگ رو چک کن:
```bash
adb logcat | grep "NeshanDirection"
```

باید ببینی:
```
Response: {"routes":[{"overview_polyline":{"points":"abc123..."}}]}
```

---

## 📞 پشتیبانی:
اگه مشکلی بود:
- 📧 ایمیل: support@neshan.org
- 📱 تلگرام: @NeshanSupport
- 🌐 مستندات: https://platform.neshan.org/api/

---

## ✅ چک لیست:
- [ ] ثبت نام در پنل نشان
- [ ] ایجاد API Key نوع "اپلیکیشن اندروید"
- [ ] وارد کردن Package Name: `com.persianai.assistant`
- [ ] وارد کردن SHA-1: `7D:D8:DA...`
- [ ] فعال کردن سرویس‌های Map, Search, Direction
- [ ] جایگزینی API Key در کد
- [ ] Build و تست برنامه
- [ ] چک کردن لاگ: `Response code: 200`

---

**موفق باشی! 🚀**
