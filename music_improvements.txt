Ø¯Ø± MusicActivity.kt Ø¨Ø§ÛŒØ¯ Ø§ÛŒÙ† ØªØºÛŒÛŒØ±Ø§Øª Ø§Ø¹Ù…Ø§Ù„ Ø´ÙˆØ¯:

1. Ø¯Ø± showPlaybackControls() Ø§Ø¶Ø§ÙÙ‡ Ú©Ù†ÛŒØ¯:
   - binding.shuffleButton?.visibility = View.VISIBLE
   - binding.repeatButton?.visibility = View.VISIBLE
   - binding.seekBar?.visibility = View.VISIBLE
   - binding.timeText?.visibility = View.VISIBLE

2. ØªÙˆØ§Ø¨Ø¹ Ø¬Ø¯ÛŒØ¯ Ø§Ø¶Ø§ÙÙ‡ Ú©Ù†ÛŒØ¯:

private fun setupSeekBar() {
    binding.seekBar?.max = exoPlayer?.duration?.toInt() ?: 0
    binding.seekBar?.setOnSeekBarChangeListener(object : SeekBar.OnSeekBarChangeListener {
        override fun onProgressChanged(seekBar: SeekBar?, progress: Int, fromUser: Boolean) {
            if (fromUser) {
                exoPlayer?.seekTo(progress.toLong())
            }
        }
        override fun onStartTrackingTouch(seekBar: SeekBar?) { isUserSeeking = true }
        override fun onStopTrackingTouch(seekBar: SeekBar?) { isUserSeeking = false }
    })
    startSeekBarUpdate()
}

private fun startSeekBarUpdate() {
    seekBarHandler.post(updateSeekBar)
}

private fun stopSeekBarUpdate() {
    seekBarHandler.removeCallbacks(updateSeekBar)
}

private val updateSeekBar = object : Runnable {
    override fun run() {
        exoPlayer?.let {
            if (!isUserSeeking) {
                val current = it.currentPosition
                val total = it.duration
                binding.seekBar?.progress = current.toInt()
                binding.timeText?.text = "${formatTime(current)} / ${formatTime(total)}"
            }
        }
        seekBarHandler.postDelayed(this, 1000)
    }
}

private fun formatTime(millis: Long): String {
    val minutes = (millis / 1000) / 60
    val seconds = (millis / 1000) % 60
    return String.format("%d:%02d", minutes, seconds)
}

3. Ø¯Ú©Ù…Ù‡ Shuffle:
binding.shuffleButton?.setOnClickListener {
    isShuffleEnabled = !isShuffleEnabled
    exoPlayer?.shuffleModeEnabled = isShuffleEnabled
    Toast.makeText(this, if (isShuffleEnabled) "ğŸ”€ ÙØ¹Ø§Ù„" else "ğŸ”€ ØºÛŒØ±ÙØ¹Ø§Ù„", Toast.LENGTH_SHORT).show()
}

4. Ø¯Ú©Ù…Ù‡ Repeat:
binding.repeatButton?.setOnClickListener {
    repeatMode = when (repeatMode) {
        Player.REPEAT_MODE_OFF -> Player.REPEAT_MODE_ONE
        Player.REPEAT_MODE_ONE -> Player.REPEAT_MODE_ALL
        else -> Player.REPEAT_MODE_OFF
    }
    exoPlayer?.repeatMode = repeatMode
}

5. Ø¯Ø± onDestroy() Ø§Ø¶Ø§ÙÙ‡ Ú©Ù†ÛŒØ¯:
   stopSeekBarUpdate()
